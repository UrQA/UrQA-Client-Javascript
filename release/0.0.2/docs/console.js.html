<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: console/console.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: console/console.js</h1>

    


    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * Console Wrapper Create function
 */
var console_wrapper_create = function(){

	var before_enabled 	= false;
	var maxlogcnt 		= 5;
	var recent_logs = [];
	var before_console = {
		log :function(){},
		warn : function() {},
		error : function() {},
		info : function(){}
	};


	/**
	 * Console Log Wrapping Object
	 * 
	 * @constructor
	 * @type {Object}
	 */
	var ConsoleLogWrapper = {};

	/**
	 * Log Pushing
	 * @param  {string} type log type ( wran, info, log, err )
	 * @param  {string} msg  log message
	 */
	var push_log = function( type, _arguments ){

		var args = Array.prototype.slice.call(_arguments);

		// log type
		// 		datetime	type	msg
		var now = new Date();
		var datetime = now.format("yyyy-mm-dd HH:MM:ss");

		var msg = args.join(', ').replace(/[\r|\n]/g, ' ');

		if( msg.length > 100 ){
			msg = msg.substring( 0, 100 );	// cut msg one line maximum is 100 
		}

		var log = datetime + "\t" + type + "\t" + msg;

		recent_logs.push( log );

		if( recent_logs.length > maxlogcnt ){
			recent_logs.splice( 0, recent_logs.length - maxlogcnt );
		}

	};

	/**
	 * log 
	 */
	ConsoleLogWrapper.log = function( ){

		push_log( "log", arguments );
		//Function.prototype.apply.call( before_console.log, console, [arguments.toString()] );
		Function.prototype.apply.call( before_console.log, console, arguments );
	};


	/**
	 * warn 
	 */
	ConsoleLogWrapper.warn = function( ){
		push_log( "warn", arguments );
		Function.prototype.apply.call( before_console.warn, console, arguments );
	};
	
	/**
	 * error
	 */
	ConsoleLogWrapper.error = function( ){
		push_log( "error", arguments );
		Function.prototype.apply.call( before_console.error, console, arguments );
	};

	/**
	 * info
	 */
	ConsoleLogWrapper.info = function(){
		push_log( "info", arguments );
		Function.prototype.apply.call( before_console.info, console, arguments );
	};

	/**
	 * get recently logs
	 * @return {string array} stored logs
	 */
	ConsoleLogWrapper.getLogs = function(){
		return recent_logs;
	}


	/**
	 * Copy log object
	 * @param  {object} src console or console wrapper
	 * @param  {[object]} dst console wrapper
	 */
	function logcopyer( src, dst ){
		dst.log = src.log;
		dst.warn = src.warn;
		dst.error = src.error;
		dst.info = src.info;
	}

	/**
	 * enable or disable function 
	 * 
	 * @param  {boolean} enabled true : enable, false : disable
	 */
	ConsoleLogWrapper.enable = function( enabled ){

		console.loglog = console.log;

		if( !enabled &amp;&amp; before_enabled ){

			if( console ){
				logcopyer( before_console, console );
			}
			else if( window.console ){
				logcopyer( before_console, window.console );
			}

		}else{

			if( console ){
				logcopyer( console, before_console );
				logcopyer( ret, console );
			}
			else if( window.console ){
				logcopyer( window.console, before_console );
				logcopyer( ret, window.console );
			}else{
				// ie or not supported browser mode
				console = ret;
				window.console = ret;
			}

		}

		before_enabled = enabled;
	}

	urqa.setConsoleLogObj( ret );	


	// test code 
	//ret.init();

	//console.log("test", 'aaaa', 1234 );
	//console.warn("test", 'aaaa', 1234 );
	//console.error("test", 'aaaa', 1234 );
	//console.info("test", 'aaaa', 1234 );

};
console_wrapper_create();</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Index</a></h2><h3>Classes</h3><ul><li><a href="console_wrapper_create-ConsoleLogWrapper.html">ConsoleLogWrapper</a></li><li><a href="create_urqa_core-urqa_core.html">urqa_core</a></li><li><a href="createUrqa_cordova-cordova_environment_obj.html">cordova_environment_obj</a></li><li><a href="createUrqa_web-web_environment_obj.html">web_environment_obj</a></li></ul><h3>Global</h3><ul><li><a href="global.html#console_wrapper_create">console_wrapper_create</a></li><li><a href="global.html#createUrqa_cordova">createUrqa_cordova</a></li><li><a href="global.html#createUrqa_web">createUrqa_web</a></li><li><a href="global.html#dateFormat">dateFormat</a></li><li><a href="global.html#getBrowser">getBrowser</a></li><li><a href="global.html#urqa">urqa</a></li></ul>
</nav>

<br clear="both">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.3.0-alpha9</a> on Fri Sep 26 2014 12:31:28 GMT+0900 (KST)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
